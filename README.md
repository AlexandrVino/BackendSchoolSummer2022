# Вступительное задание в Летнюю Школу Бэкенд Разработки #

## Описание ##

В данной работе реализован бэкенд для веб-сервиса сравнения цен, аналогичный
сервису [Яндекс Товары](https://yandex.ru/products). Обычно взаимодействие с такими сервисами происходит следующим
образом:

1. Представители магазинов загружают информацию о своих товарах и категориях. Также можно изменять и удалять информацию
   о ранее загруженных товарах и категориях.
2. Покупатели, пользуясь веб-приложением, могут искать предложения разных магазинов, сравнивать цены и следить за их
   динамикой и историей.

# Запуск проекта (сборка) #

Скопируйте репозиторий <code>git clone https://github.com/AlexandrVino/BackendSchool.git</code> 

В моем решении реализованы 2-а метода запуска/сборки проекта:

1. Через докер:
    * Выполните команду <code>nano .env</code> (либо любая другая команда, позволяющая форматировать текстовые файлы) и
      запишите туда данные для бд, по примеру .env.dist
    * <code>docker-compose up --build</code> и докер сам создаст 3 контейнера:
        1. database - контейнер, содержащий в себе PostgreSQL базу данных
        2. adminer - контейнер, позволяющий работать напрямую с бд (адрес: http://localhost:8080)
        3. api-server - контейнер, который является бэкондом
    * чтобы прогнать по тестам и проверить время их выполнения, выполните:
      * Внутри контейнера:
          1. <code>docker ps -a</code> - Выведет все активные контейнеры, среди них ищем тот, у которого image ==
             api-server, копируем его id
          2. <code>docker exec -ti {id контейнера} /bin/sh</code> - входим в запущенный контейнер
          3. <code>python tests/unit_test.py</code> - команда запуска тестов (я обновил те, которые дал Яндекс)<br>(Внимание !!! <code>API_BASEURL = "http://localhost:Порт из файла docker-compose.yml у контейнера api-server"</code>) 
      * Извне:
         1. Выполните комманду <code>python tests/unit_test.py</code>, указав в <code>API_BASEURL = "Адрес, на котором расположен ваш сервер"</code>

3. Через запуск непосредственно через python:
    * Создаем бд (Например, через приложение [PGAdmin](https://www.pgadmin.org/))
    * Заполните <code>.env</code> файл по примеру .env.dist (данные для бд)
    * <code> python market/db/__main__.py upgrade head </code> (<code>market-db upgrade head</code> для ленивых) - применяем миграции 
    * <code> python main.py </code> - запускаем проект
    * <code> python tests/unit_test.py </code> - запускаем тесты
   
   
### `Воуля! вы молодец и со всем справились :3` ###